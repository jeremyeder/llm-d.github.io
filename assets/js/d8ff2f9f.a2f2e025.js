"use strict";(self.webpackChunkdocusaurus_test=self.webpackChunkdocusaurus_test||[]).push([[8482],{3004:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/files/LICENSE-fdbee52198bec4efcc81c1595d558aae.bin"},3970:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"architecture/architecture","title":"Overview of llm-d architecture","description":"llm-d is a Kubernetes-native distributed inference serving stack - a well-lit path for anyone to serve large language models at scale, with the fastest time-to-value and competitive performance per dollar for most models across most hardware accelerators.","source":"@site/docs/architecture/00_architecture.md","sourceDirName":"architecture","slug":"/architecture/architecture","permalink":"/docs/architecture/architecture","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":0,"frontMatter":{"sidebar_position":0,"label":"llm-d Architecture"},"sidebar":"structureSidebar","next":{"title":"Deployer Architecture","permalink":"/docs/architecture/Component Architecture/deployer"}}');var r=n(4848),s=n(8453);const l={sidebar_position:0,label:"llm-d Architecture"},a="Overview of llm-d architecture",o={},c=[{value:"Architecture",id:"architecture",level:2},{value:"Getting Started",id:"getting-started",level:2},{value:"Deploying as as solution",id:"deploying-as-as-solution",level:3},{value:"Experimenting and developing with llm-d",id:"experimenting-and-developing-with-llm-d",level:3},{value:"Releases",id:"releases",level:2},{value:"Contribute",id:"contribute",level:2},{value:"Guidelines",id:"guidelines",level:3},{value:"Connect",id:"connect",level:3},{value:"License",id:"license",level:2}];function d(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"overview-of-llm-d-architecture",children:"Overview of llm-d architecture"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"llm-d"})," is a Kubernetes-native distributed inference serving stack - a well-lit path for anyone to serve large language models at scale, with the fastest time-to-value and competitive performance per dollar for most models across most hardware accelerators."]}),"\n",(0,r.jsxs)(t.p,{children:["With ",(0,r.jsx)(t.code,{children:"llm-d"}),", users can operationalize GenAI deployments with a modular solution that leverages the latest distributed inference optimizations like KV-cache aware routing and disaggregated serving, co-designed and integrated with the Kubernetes operational tooling in ",(0,r.jsx)(t.a,{href:"https://github.com/kubernetes-sigs/gateway-api-inference-extension",children:"Inference Gateway (IGW)"}),"."]}),"\n",(0,r.jsxs)(t.p,{children:["Built by leaders in the Kubernetes and vLLM projects, ",(0,r.jsx)(t.code,{children:"llm-d"})," is a community-driven, Apache-2 licensed project with an open development model."]}),"\n",(0,r.jsx)(t.h2,{id:"architecture",children:"Architecture"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"llm-d"})," adopts a layered architecture on top of industry-standard open technologies: vLLM, Kubernetes, and Inference Gateway."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"llm-d Architecture",src:n(5520).A+"",width:"859",height:"474"})}),"\n",(0,r.jsxs)(t.p,{children:["Key features of ",(0,r.jsx)(t.code,{children:"llm-d"})," include:"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"vLLM-Optimized Inference Scheduler:"})," ",(0,r.jsx)(t.code,{children:"llm-d"})," builds on IGW's pattern for customizable \u201csmart\u201d load-balancing via the Endpoint Picker Protocol (EPP) to define vLLM-optimized scheduling. Leveraging operational telemetry, Inference Scheduler implements and scoring algorithms to make decisions with P/D-, KV-cache-, SLA-, and load-awareness. Advanced teams can implement their own scorers to further customize, while benefiting from other features in IGW, like flow control and latency-aware balancing. ",(0,r.jsx)(t.a,{href:"https://docs.google.com/document/d/1kE1LY8OVjiOgKVD9-9Po96HODbTIbgHp4qgvw06BCOc/edit?tab=t.0#heading=h.4rgkvvo5gnle",children:"See our Northstar design"})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Disaggregated Serving with vLLM:"})," ",(0,r.jsx)(t.code,{children:"llm-d"})," leverages vLLM\u2019s support for disaggregated serving to run prefill and decode on independent instances, using high-performance transport libraries like NVIDIA\u2019s NIXL. In ",(0,r.jsx)(t.code,{children:"llm-d"}),", we plan to support latency-optimized implementation using fast interconnects (IB, RDMA, ICI) and throughput optimized implementation using data-center networking. ",(0,r.jsx)(t.a,{href:"https://docs.google.com/document/d/1FNN5snmipaTxEA1FGEeSH7Z_kEqskouKD1XYhVyTHr8/edit?tab=t.0",children:"See our Northstar design"})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Disaggregated Prefix Caching with vLLM:"})," ",(0,r.jsx)(t.code,{children:"llm-d"})," uses vLLM's KVConnector API to provide a pluggable cache for previous calculations, including offloading KVs to host, remote storage, and systems like LMCache. We plan to support two KV caching schemes. ",(0,r.jsx)(t.a,{href:"https://docs.google.com/document/d/1inTneLEZTv3rDEBB9KLOB9K6oMq8c3jkogARJqdt_58/edit?tab=t.0",children:"See our Northstar design"})]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.em,{children:"Independent"})," (north-south) caching with offloading to local memory and disk, providing a zero operational cost mechanism for offloading."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.em,{children:"Shared"})," (east-west) caching with KV transfer between instances and shared storage with global indexing, providing potential for higher performance at the cost of a more operationally complex system."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Variant Autoscaling over Hardware, Workload, and Traffic"})," (\ud83d\udea7): We plan to implement a traffic- and hardware-aware autoscaler that (a) measures the capacity of each model server instance, (b) derive a load function that takes into account different request shapes and QoS, and (c) assesses recent traffic mix (QPS, QoS, and shapes)\r\nUsing the recent traffic mix to calculate the optimal mix of instances to handle prefill, decode, and latency-tolerant requests, enabling use of HPA for SLO-level efficiency. ",(0,r.jsx)(t.a,{href:"https://docs.google.com/document/d/1inTneLEZTv3rDEBB9KLOB9K6oMq8c3jkogARJqdt_58/edit?tab=t.0",children:"See our Northstar design"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["For more, see the ",(0,r.jsx)(t.a,{href:"https://github.com/llm-d/llm-d/blob/dev/docs/proposals/llm-d.md",children:"project proposal"})]}),"\n",(0,r.jsx)(t.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"llm-d"})," can be installed as a full solution, customizing enabled features, or through its individual components for experimentation."]}),"\n",(0,r.jsx)(t.h3,{id:"deploying-as-as-solution",children:"Deploying as as solution"}),"\n",(0,r.jsx)(t.p,{children:"llm-d's deployer can be used to that installed it as a solution using a single Helm chart on Kubernetes."}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Tip"}),"\r\nSee the guided experience with our ",(0,r.jsx)(t.a,{href:"https://github.com/llm-d/llm-d-deployer/blob/main/quickstart/README.md",children:"quickstart"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"experimenting-and-developing-with-llm-d",children:"Experimenting and developing with llm-d"}),"\n",(0,r.jsx)(t.p,{children:"llm-d is repo is a metaproject with subcomponents can that can be cloned individually."}),"\n",(0,r.jsx)(t.p,{children:"To clone all the components:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"    git clone --recurse-submodules https://github.com/llm-d/llm-d.git \n"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Tip"}),"\r\nAs a customization example, see ",(0,r.jsx)(t.a,{href:"https://github.com/llm-d/llm-d/tree/dev",children:"here"})," a template for adding a scheduler scorer."]}),"\n",(0,r.jsx)(t.h2,{id:"releases",children:"Releases"}),"\n",(0,r.jsxs)(t.p,{children:["Visit our ",(0,r.jsx)(t.a,{href:"https://github.com/llm-d/llm-d-deployer/releases",children:"GitHub Releases page"})," and review the release notes to stay updated with the latest releases."]}),"\n",(0,r.jsx)(t.h2,{id:"contribute",children:"Contribute"}),"\n",(0,r.jsx)(t.h3,{id:"guidelines",children:"Guidelines"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["See ",(0,r.jsx)(t.a,{href:"https://github.com/llm-d/llm-d/blob/dev/PROJECT.md",children:"our project overview"})," for more details on our development process and governance."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"connect",children:"Connect"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["We use Slack to discuss development across organizations. Please join: ",(0,r.jsx)(t.a,{href:"https://llm-d.slack.com",children:" https://llm-d.slack.com"})]}),"\n",(0,r.jsxs)(t.li,{children:["We host a weekly standup for contributors on Wednesdays at 1230pm ET. Please join: ",(0,r.jsx)(t.a,{href:"https://calendar.google.com/calendar/event?action=TEMPLATE&tmeid=NG9yZ3AyYTN0N3VlaW01b21xbWV2c21uNjRfMjAyNTA1MjhUMTYzMDAwWiByb2JzaGF3QHJlZGhhdC5jb20&tmsrc=robshaw%40redhat.com&scp=ALL",children:"Meeting Details"})]}),"\n",(0,r.jsxs)(t.li,{children:["We use Google Groups to share architecture diagrams and other content. Please join: ",(0,r.jsx)(t.a,{href:"https://groups.google.com/g/llm-d-contributors",children:"Google Group"})]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"license",children:"License"}),"\n",(0,r.jsxs)(t.p,{children:["This project is licensed under Apache License 2.0. See the ",(0,r.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(3004).A+"",children:"LICENSE file"})," for details."]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},5520:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/llm-d-arch-simplified-d41875ab8b1fcf94a1a42df44940ceae.svg"},8453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>a});var i=n(6540);const r={},s=i.createContext(r);function l(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);